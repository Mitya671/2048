<!DOCTYPE html>
<html>
    <head>
        <meta charset = "utf 8">
        <link rel = "stylesheet" href = "2048.css">

 </head>
 <body>


    <h1>2048</h1>
    <hr>
    <h2>Score: <span id="score">0</span></h2>
    <div id="field">
    </div>















 <script>


let field = document.querySelector('#field');
let body = document.querySelector('body')
let board = 0;
let rows = 4;
let columns = 4;
window.onload = function () {
    set();
};

function set() {
    board = [
        [4,4,4,4],
        [0,0,4,0],
        [8,8,2,0],
        [0,32,0,32],
    ];
    for (let r=0; r<rows; r++) {
        for (let c=0; c<columns; c++) {
            let tile = document.createElement('div');
            tile.id = r.toString() + '-' + c.toString();
            tile.classList.add('tile')
            let num = board[r][c];
            update(tile, num);
            field.append(tile)
        }
    }
}

function update(tile, num) { // добавляет плиточке класс, соответствующий значению
    tile.innerHTML = '';
    tile.classList.value = '';
    tile.classList.add('tile');
    if (num>0) {
        tile.innerHTML = num.toString();
        if (num<=4096) {
            tile.classList.add('x'+num.toString())
        } else { tile.classList.add('x8192')}
    }
}

function turn() {
    if (event.code == 'ArrowLeft') {
        turnLeft();
    }
}

function turnLeft() { // [0,0,4,4] надо убрать нули из строчки
    for (let row of board) {
        row = filterZero(row);
        //убрали 0, теперь складываем
        for (let i=0; i<row.length; i++) {
            if (row[i] == row[i+1]) {
                row[i] = row[i]*2;
                row[i+1] = 0;
            }
            row = filterZero(row);         //теперь удаляем образованные нули
            // теперь добавляем нули в конец
            addZero(row);
            for (let j=0; j<columns; j++) {
                
            }            
        } 
            // теперь обновляем наши плиточки в соответствии с новыми значенниями борд
        
        console.log(row)

    }
}






document.addEventListener('keyup', turn)





function filterZero(row) {
    return row.filter(function(elem) {if (elem != 0){return true}})
}

function addZero(row) {
    while (row.length<4) {
                row.push(0)
            }
}







 </script>
</body>
</html>